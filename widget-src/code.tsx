const { widget } = figma
const { Frame, Ellipse, Rectangle, useSyncedState, usePropertyMenu, AutoLayout, Text, SVG } = widget

function Widget() {
  const [random, setRandom] = useSyncedState('random', 0);
  const [result, setResult] = useSyncedState("result", false);
  const [rock, setRock] = useSyncedState("rock", false);
  const [scissors, setScissors] = useSyncedState("scissors", false);
  const [paper, setPaper] = useSyncedState("paper", false);
  const propertyMenu: WidgetPropertyMenuItem[] = [];

  if (result === false) {
    propertyMenu.push({
      tooltip: 'Throw',
      propertyName: 'throw',
      itemType: 'action',
    })
  }
  else {
    propertyMenu.push({
      tooltip: 'One, two, three',
      propertyName: 'prepare',
      itemType: 'action',
    })
  }

  usePropertyMenu(propertyMenu, ({ propertyName }) => {
    if (propertyName === 'prepare') {
      setResult(false);
      setRock(false);
      setScissors(false);
      setPaper(false);

    } else if (propertyName === 'throw') {
      setRandom(Math.floor(Math.random() * 100));
      setResult(true);
      if (random >= 0 && random <= 33) { setRock(true); }
      else if (random >= 34 && random <= 66) { setScissors(true); }
      else { setPaper(true); }
    }
  })

  return (
    <Frame
      name="RockPaperScissors"
      overflow="visible"
      width={144}
      height={144}
    >
      <Frame
        name="Paper"
        hidden={!paper}
        x={{
          type: "horizontal-scale",
          leftOffsetPercent: 0,
          rightOffsetPercent: 0,
        }}
        y={{
          type: "vertical-scale",
          topOffsetPercent: 0,
          bottomOffsetPercent: 0,
        }}
        strokeWidth={4}
        overflow="visible"
        width={144}
        height={144}
      >
        <SVG
          name="Vector_Vector_Vector"
          height={144}
          width={144}
          src="<svg width='144' height='144' viewBox='0 0 144 144' fill='none' xmlns='http://www.w3.org/2000/svg'>
<path d='M129.66 38.344L93.66 2.344C92.216 0.9 90.212 0 88 0C83.584 0 80.004 3.584 80 8C80 10.208 80.896 12.212 82.344 13.66L66.908 29.096L102.908 65.096L118.344 49.66C119.792 51.104 121.792 52 124 52C128.416 52 132.004 48.416 132 44C132 41.792 131.104 39.792 129.66 38.344Z' fill='#E1E8ED'/>
<path d='M88 0H28C19.164 0 12 7.164 12 16V128C12 136.836 19.164 144 28 144H116C124.836 144 132 136.836 132 128V44H96C92 44 88 40 88 36V0Z' fill='#CCD6DD'/>
<path d='M88 0H80V36C80 44.836 87.164 52 96 52H132V44H96C92 44 88 40 88 36V0ZM68 32C68 34.208 66.208 36 64 36H32C29.792 36 28 34.208 28 32C28 29.792 29.792 28 32 28H64C66.208 28 68 29.792 68 32ZM68 48C68 50.208 66.208 52 64 52H32C29.792 52 28 50.208 28 48C28 45.792 29.792 44 32 44H64C66.208 44 68 45.792 68 48ZM116 64C116 66.208 114.212 68 112 68H32C29.792 68 28 66.208 28 64C28 61.792 29.792 60 32 60H112C114.212 60 116 61.792 116 64ZM116 80C116 82.212 114.212 84 112 84H32C29.792 84 28 82.212 28 80C28 77.788 29.792 76 32 76H112C114.212 76 116 77.788 116 80ZM116 96C116 98.212 114.212 100 112 100H32C29.792 100 28 98.212 28 96C28 93.788 29.792 92 32 92H112C114.212 92 116 93.788 116 96ZM116 112C116 114.212 114.212 116 112 116H32C29.792 116 28 114.212 28 112C28 109.788 29.792 108 32 108H112C114.212 108 116 109.788 116 112Z' fill='#99AAB5'/>
</svg>
"
        />
      </Frame>
      <Frame
        name="Rock"
        hidden={!rock}
        x={{
          type: "horizontal-scale",
          leftOffsetPercent: 0,
          rightOffsetPercent: 0,
        }}
        y={{
          type: "vertical-scale",
          topOffsetPercent: 0,
          bottomOffsetPercent: 0,
        }}
        strokeWidth={4}
        overflow="visible"
        width={144}
        height={144}
      >
        <SVG
          name="Vector_Vector_Vector_Vector_Vector_Vector_Vector_Vector_Vector_Vector"
          height={144}
          width={144}
          src="<svg width='144' height='144' viewBox='0 0 144 144' fill='none' xmlns='http://www.w3.org/2000/svg'>
<path d='M48 16.628C48 16.628 64 12.328 68 12.328C72 12.328 88 16.628 88 16.628C88 16.628 104 33.82 108 33.82C108 33.82 116 33.82 124 42.416C132 51.012 132 68.204 132 68.204C132 68.204 140 85.396 140 93.992C140 102.588 136 111.184 132 115.484C128 119.784 112 124.08 112 124.08C112 124.08 108 132.676 100 136.976C76 141.276 60 136.976 60 136.976L52 128.38C52 128.38 24 124.08 20 124.08C16 124.08 4 106.888 4 102.588C4 98.288 4 85.396 8 72.5C16 59.604 20 55.308 20 55.308C20 55.308 16 46.716 20 38.12C28 29.524 44 25.224 44 25.224L48 16.628V16.628Z' fill='#66757F'/>
<path d='M49.636 17.96C49.636 17.96 64.168 13.876 67.932 13.876C71.696 13.876 87.892 18.472 87.892 18.472C87.892 18.472 102.188 34.56 105.952 34.56C105.952 34.56 114.104 34.38 121.636 42.476C129.168 50.572 128.468 64.944 128.468 64.944C128.468 64.944 136 81.128 136 89.22C136 97.312 132.236 105.408 128.472 109.456C124.708 113.504 109.648 117.548 109.648 117.548C109.648 117.548 105.884 125.64 98.352 129.688C75.764 133.736 60.704 129.688 60.704 129.688L53.176 121.596C53.176 121.596 26.824 117.548 23.06 117.548C19.296 117.548 8 101.36 8 97.312C8 93.264 8 81.124 11.764 68.984C19.296 56.844 23.06 52.8 23.06 52.8C23.06 52.8 18.308 46.228 22.072 38.132C29.6 30.04 45.596 25.876 45.596 25.876L49.636 17.96V17.96Z' fill='#99AAB5'/>
<path d='M51.084 21.248C51.084 21.248 64.676 17.68 68.196 17.68C71.716 17.68 86.864 21.692 86.864 21.692C86.864 21.692 100.232 35.736 103.752 35.736C103.752 35.736 111.376 35.58 118.42 42.644C125.46 49.708 124.812 62.256 124.812 62.256C124.812 62.256 125.912 79.236 128.764 79.748C136.004 81.044 129.432 94.6 125.912 98.132C122.392 101.664 97.872 103.24 97.872 103.24C97.872 103.24 98.736 114.26 91.692 117.796C70.568 121.328 61.432 118.78 61.432 118.78L54.392 111.716C54.392 111.716 37.232 95.328 33.712 95.328C30.192 95.328 12.14 94.052 12.14 90.52C12.14 86.988 12.14 76.388 15.66 65.792C22.7 55.196 26.224 51.66 26.224 51.66C26.224 51.66 21.78 45.92 25.3 38.856C32.34 31.792 47.3 28.156 47.3 28.156L51.084 21.248Z' fill='#CCD6DD'/>
<path d='M25.16 50.388L41.084 57.792L32.764 63.664L15.668 65.792L25.16 50.388Z' fill='#99AAB5'/>
<path d='M6.388 87.924C6.388 87.924 10.904 102.988 12.092 104.776C13.28 106.564 28.488 105.288 30.388 105.288C32.288 105.288 41.556 110.14 41.556 110.14C41.556 110.14 29.2 113.46 24.924 112.948C20.648 112.436 9.532 110.44 8.528 107.584C7.524 104.728 6.388 87.924 6.388 87.924V87.924Z' fill='#66757F'/>
<path d='M29.2 38.388C31.16 37.768 44.644 32.004 47.496 32.26C50.348 32.516 62.468 39.408 59.616 41.708C56.764 44.008 41.08 42.22 36.568 42.22C32.056 42.22 25.16 39.664 29.2 38.388ZM19.696 69.284C20.908 67 37.044 66.22 37.044 66.22C37.044 66.22 57.956 74.648 57.956 75.924C57.956 77.2 38.948 85.884 37.044 86.136C35.14 86.388 18.744 71.072 19.696 69.284V69.284ZM66.508 84.86C66.132 82.84 74.588 70.56 76.252 69.54C77.916 68.52 100.252 62.644 104.052 62.644C107.852 62.644 119.972 71.58 120.212 73.368C120.448 75.156 109.52 87.412 106.668 88.432C103.816 89.456 67.22 88.688 66.508 84.86ZM87.896 51.152C86.996 53.3 109.284 56.26 111.66 55.236C114.036 54.216 118.312 47.32 117.6 45.532C116.888 43.744 109.996 38.636 106.432 39.148C102.864 39.664 90.032 46.048 87.896 51.152V51.152ZM70.312 19.748C72.304 20.176 85.52 23.324 87.184 25.876C88.848 28.428 79.344 36.344 76.728 36.6C74.116 36.856 56.292 25.876 54.392 24.6C52.492 23.324 66.744 18.98 70.312 19.748Z' fill='#E1E8ED'/>
<path d='M52.252 125.456C50.588 122.904 53.204 114.476 54.628 115.496C56.052 116.516 60.332 119.58 60.568 122.136C60.804 124.688 65.084 129.54 68.172 131.072C71.26 132.604 88.132 132.604 90.984 131.584C93.836 130.564 100.488 124.944 102.152 121.624C103.816 118.304 105.736 118.06 109.648 117.544C113.56 117.028 117.336 120.92 112 124.08C106.668 127.24 100.964 132.86 94.312 134.136C87.66 135.412 66.036 136.436 62.232 134.904C58.428 133.372 52.252 125.456 52.252 125.456V125.456Z' fill='#66757F'/>
<path d='M80.8 107.016C78.796 105.94 78.048 97.036 79.08 96.296C80.112 95.556 89.744 97.036 91.98 97.404C94.216 97.772 107.804 96.664 109.18 98.144C110.556 99.624 113.872 105.048 115.028 108.308C116.184 111.572 108.664 111.08 105.74 110.34C102.816 109.6 83.552 108.496 80.8 107.016V107.016ZM50.348 48.088C52.96 48.088 63.892 47.832 66.268 48.088C68.644 48.344 76.248 55.492 72.684 56.26C69.12 57.028 59.616 59.58 58.188 59.836C56.76 60.092 51.536 55.24 49.872 53.964C48.212 52.684 47.5 48.088 50.348 48.088V48.088ZM80.292 40.94C81.612 38.816 86.708 38.132 86.944 40.428C87.18 42.728 85.756 47.832 82.904 47.576C80.052 47.324 78.388 44.004 80.292 40.94V40.94ZM66.508 94.816C68.88 94.532 73.4 94.048 73.4 96.092C73.4 98.136 70.548 98.9 67.22 98.644C63.896 98.392 64.368 95.072 66.508 94.816Z' fill='#99AAB5'/>
<path d='M57.24 66.476C59.316 64.692 66.508 64.432 68.172 65.2C69.836 65.968 66.272 71.328 64.132 71.584C61.992 71.836 54.864 68.516 57.24 66.476V66.476Z' fill='#E1E8ED'/>
<path d='M104.764 105.54C107.136 104.904 112.844 104.264 112.604 106.052C112.368 107.84 109.992 111.16 108.088 110.904C106.184 110.648 102.864 106.052 104.764 105.54ZM89.32 123.416C91.944 122.98 95.972 120.864 95.736 123.416C95.5 125.968 92.648 129.288 89.556 128.78C86.468 128.268 86.232 123.924 89.32 123.416V123.416Z' fill='#66757F'/>
</svg>
"
        />
      </Frame>
      <Frame
        name="Scissors"
        hidden={!scissors}
        x={{
          type: "horizontal-scale",
          leftOffsetPercent: 0,
          rightOffsetPercent: 0,
        }}
        y={{
          type: "vertical-scale",
          topOffsetPercent: 0,
          bottomOffsetPercent: 0,
        }}
        strokeWidth={4}
        overflow="visible"
        width={144}
        height={144}
      >
        <SVG
          name="Vector_Vector_Vector_Vector_Vector"
          height={144}
          width={144}
          src="<svg width='144' height='144' viewBox='0 0 144 144' fill='none' xmlns='http://www.w3.org/2000/svg'>
<path d='M101.3 67.224C109.488 63.544 117.564 59.212 126.34 55.12C126.612 55.008 126.892 54.916 127.164 54.792C127.732 54.536 128.272 54.244 128.816 53.96L129.26 53.752L129.248 53.744C141.208 47.192 146.696 33.372 141.516 21.84C136.048 9.65599 120.748 4.65599 107.348 10.68C93.944 16.7 87.52 31.456 92.992 43.64C93.18 44.064 93.412 44.46 93.628 44.864C91.876 52.604 86.12 52.84 86.12 52.84C86.12 52.84 92.204 71.312 101.3 67.224V67.224ZM111.308 19.504C119.84 15.672 129.416 18.496 132.696 25.804C135.984 33.108 131.728 42.14 123.2 45.972C114.672 49.804 105.096 46.984 101.816 39.68C98.532 32.368 102.78 23.332 111.308 19.504V19.504Z' fill='#DD2E44'/>
<path d='M4.52801 107.912C7.15601 112.564 14.424 116.66 19.08 114.028L101.764 67.016C99.78 62.604 92.512 55.264 86.116 52.84L4.52801 107.912V107.912Z' fill='#99AAB5'/>
<path d='M141.52 122.16C146.7 110.632 141.212 96.808 129.252 90.256L129.264 90.244L128.816 90.032C128.276 89.748 127.736 89.452 127.168 89.2C126.896 89.08 126.62 88.988 126.344 88.876C117.568 84.784 109.492 80.448 101.304 76.772C92.208 72.688 86.12 91.16 86.12 91.16C86.12 91.16 91.876 91.396 93.628 99.132C93.412 99.54 93.184 99.932 92.992 100.36C87.52 112.54 93.944 127.292 107.348 133.32C120.748 139.34 136.048 134.34 141.52 122.16V122.16ZM111.308 124.496C102.78 120.66 98.532 111.632 101.816 104.32C105.096 97.016 114.672 94.196 123.2 98.032C131.728 101.856 135.98 110.888 132.696 118.196C129.416 125.504 119.84 128.324 111.308 124.496Z' fill='#DD2E44'/>
<path d='M4.52801 36.088C7.15601 31.436 14.424 27.34 19.08 29.972L101.764 76.984C99.78 81.396 92.512 88.736 86.116 91.16L4.52801 36.088Z' fill='#CCD6DD'/>
<path d='M74.416 78.248C70.964 78.248 68.168 75.444 68.168 72C68.168 68.548 70.964 65.752 74.416 65.752C77.868 65.752 80.664 68.548 80.664 72C80.664 75.448 77.868 78.248 74.416 78.248Z' fill='#99AAB5'/>
</svg>
"
        />
      </Frame>
      <Frame
        name="Default"
        hidden={result}
        x={{
          type: "horizontal-scale",
          leftOffsetPercent: 0,
          rightOffsetPercent: 0,
        }}
        y={{
          type: "vertical-scale",
          topOffsetPercent: 0,
          bottomOffsetPercent: 0,
        }}
        strokeWidth={4}
        overflow="visible"
        width={144}
        height={144}
      >
        <SVG
          name="Vector_Vector"
          height={144}
          width={144}
          src="<svg width='144' height='144' viewBox='0 0 144 144' fill='none' xmlns='http://www.w3.org/2000/svg'>
<path d='M68 108C61.372 108 56 102.628 56 96V80C56 73.372 61.372 68 68 68C70.412 67.976 92 64 92 48C92 40 84 32 72 32C62.236 32 56 40 56 44C56 50.628 50.628 56 44 56C37.372 56 32 50.628 32 44C32 24.488 50.32 8 72 8C104 8 116 31.928 116 52C116 68.58 106.892 81.252 90.348 87.68C86.748 89.084 83.188 90.028 80 90.668V96C80 102.628 74.628 108 68 108Z' fill='#CCD6DD'/>
<path d='M68 140C74.6274 140 80 134.627 80 128C80 121.373 74.6274 116 68 116C61.3726 116 56 121.373 56 128C56 134.627 61.3726 140 68 140Z' fill='#CCD6DD'/>
</svg>
"
        />
      </Frame>
    </Frame>
  )
}
widget.register(Widget)
